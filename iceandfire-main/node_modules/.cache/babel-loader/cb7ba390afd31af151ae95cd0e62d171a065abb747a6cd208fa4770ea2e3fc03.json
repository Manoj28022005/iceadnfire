{"ast":null,"code":"import React,{useState}from'react';import{useLocation}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ChooseUPI(){const location=useLocation();const{orderDetails}=location.state||{};const[transactionId,setTransactionId]=useState('');const[showTransactionBox,setShowTransactionBox]=useState(false);const[error,setError]=useState('');const[successMessage,setSuccessMessage]=useState(false);if(!orderDetails){return/*#__PURE__*/_jsx(\"div\",{children:\"Error: No order details available\"});}const total=orderDetails.total;const googlePayLink=\"https://pay.google.com/gp/p/ui/pay?pa=manoj7799076555@okicici&pn=manoj%20siva&tn=Payment%20for%20Order&am=\".concat(total,\"&cu=INR\");const phonePeLink=\"https://upi.phonepe.com/pay?pa=yourname@ybl&pn=Your%20Name&tn=Payment%20for%20Order&am=\".concat(total,\"&cu=INR\");const handleLinkClick=()=>{setShowTransactionBox(true);};const handleTransactionSubmit=async()=>{if(transactionId.trim()===''){setError('Transaction ID is required');return;}const payload={name:orderDetails.name,email:orderDetails.email,transactionId:transactionId.trim(),totalAmount:orderDetails.total,items:orderDetails.items,status:'Pending'};try{const response=await fetch(\"\".concat(process.env.REACT_APP_WEB_URL,\"/api/orders\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(response.ok){setSuccessMessage(true);setTransactionId('');setError('');}else{setError('Failed to submit transaction details.');}}catch(err){setError('Error submitting transaction details.');}};const closeSuccessMessage=()=>{setSuccessMessage(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Pay Using UPI\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Amount: \\u20B9\",total]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"a\",{href:googlePayLink,className:\"btn btn-outline-primary me-3\",target:\"_blank\",rel:\"noopener noreferrer\",onClick:handleLinkClick,children:\"Pay with Google Pay\"}),/*#__PURE__*/_jsx(\"a\",{href:phonePeLink,className:\"btn btn-outline-primary me-3\",target:\"_blank\",rel:\"noopener noreferrer\",onClick:handleLinkClick,children:\"Pay with PhonePe\"})]}),showTransactionBox&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Enter your Transaction ID:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:transactionId,onChange:e=>setTransactionId(e.target.value),className:\"form-control mb-2\",placeholder:\"Enter transaction ID\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:handleTransactionSubmit,children:\"Submit\"})]}),successMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",style:{position:'fixed',top:0,left:0,width:'100%',height:'100%',backgroundColor:'rgba(0, 0, 0, 0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:1050},children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",style:{background:'white',padding:'20px',borderRadius:'10px',textAlign:'center',maxWidth:'500px',width:'100%'},children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",children:\"Order Placed Successfully\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your order has been placed successfully. You will receive a final confirmation in 5 minutes.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:closeSuccessMessage,children:\"Close\"})]})})]});}export default ChooseUPI;","map":{"version":3,"names":["React","useState","useLocation","jsx","_jsx","jsxs","_jsxs","ChooseUPI","location","orderDetails","state","transactionId","setTransactionId","showTransactionBox","setShowTransactionBox","error","setError","successMessage","setSuccessMessage","children","total","googlePayLink","concat","phonePeLink","handleLinkClick","handleTransactionSubmit","trim","payload","name","email","totalAmount","items","status","response","fetch","process","env","REACT_APP_WEB_URL","method","headers","body","JSON","stringify","ok","err","closeSuccessMessage","className","href","target","rel","onClick","type","value","onChange","e","placeholder","style","position","top","left","width","height","backgroundColor","display","justifyContent","alignItems","zIndex","background","padding","borderRadius","textAlign","maxWidth"],"sources":["D:/CODING/WEB_DEVELOPMENT/ICEANDFIRE/iceandfire-main/src/screens/ChooseUPI.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nfunction ChooseUPI() {\r\n  const location = useLocation();\r\n  const { orderDetails } = location.state || {};\r\n\r\n  const [transactionId, setTransactionId] = useState('');\r\n  const [showTransactionBox, setShowTransactionBox] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [successMessage, setSuccessMessage] = useState(false);\r\n\r\n  if (!orderDetails) {\r\n    return <div>Error: No order details available</div>;\r\n  }\r\n\r\n  const total = orderDetails.total;\r\n\r\n  const googlePayLink = `https://pay.google.com/gp/p/ui/pay?pa=manoj7799076555@okicici&pn=manoj%20siva&tn=Payment%20for%20Order&am=${total}&cu=INR`;\r\n  const phonePeLink = `https://upi.phonepe.com/pay?pa=yourname@ybl&pn=Your%20Name&tn=Payment%20for%20Order&am=${total}&cu=INR`;\r\n\r\n  const handleLinkClick = () => {\r\n    setShowTransactionBox(true);\r\n  };\r\n\r\n  const handleTransactionSubmit = async () => {\r\n    if (transactionId.trim() === '') {\r\n      setError('Transaction ID is required');\r\n      return;\r\n    }\r\n\r\n    const payload = {\r\n      name: orderDetails.name,\r\n      email: orderDetails.email,\r\n      transactionId: transactionId.trim(),\r\n      totalAmount: orderDetails.total,\r\n      items: orderDetails.items,\r\n      status: 'Pending',\r\n    };\r\n\r\n    try {\r\n      const response = await fetch(`${process.env.REACT_APP_WEB_URL}/api/orders`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccessMessage(true);\r\n        setTransactionId('');\r\n        setError('');\r\n      } else {\r\n        setError('Failed to submit transaction details.');\r\n      }\r\n    } catch (err) {\r\n      setError('Error submitting transaction details.');\r\n    }\r\n  };\r\n\r\n  const closeSuccessMessage = () => {\r\n    setSuccessMessage(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h3>Pay Using UPI</h3>\r\n      <p>Total Amount: â‚¹{total}</p>\r\n\r\n      <div className=\"mt-4\">\r\n        <a\r\n          href={googlePayLink}\r\n          className=\"btn btn-outline-primary me-3\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          onClick={handleLinkClick}\r\n        >\r\n          Pay with Google Pay\r\n        </a>\r\n\r\n        <a\r\n          href={phonePeLink}\r\n          className=\"btn btn-outline-primary me-3\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          onClick={handleLinkClick}\r\n        >\r\n          Pay with PhonePe\r\n        </a>\r\n      </div>\r\n\r\n      {showTransactionBox && (\r\n        <div className=\"mt-5\">\r\n          <h5>Enter your Transaction ID:</h5>\r\n          <input\r\n            type=\"text\"\r\n            value={transactionId}\r\n            onChange={(e) => setTransactionId(e.target.value)}\r\n            className=\"form-control mb-2\"\r\n            placeholder=\"Enter transaction ID\"\r\n          />\r\n          {error && <p className=\"text-danger\">{error}</p>}\r\n          <button className=\"btn btn-success\" onClick={handleTransactionSubmit}>\r\n            Submit\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {successMessage && (\r\n        <div\r\n          className=\"modal-backdrop\"\r\n          style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100%',\r\n            height: '100%',\r\n            backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            zIndex: 1050,\r\n          }}\r\n        >\r\n          <div\r\n            className=\"modal-content\"\r\n            style={{\r\n              background: 'white',\r\n              padding: '20px',\r\n              borderRadius: '10px',\r\n              textAlign: 'center',\r\n              maxWidth: '500px',\r\n              width: '100%',\r\n            }}\r\n          >\r\n            <h5 className=\"modal-title\">Order Placed Successfully</h5>\r\n            <p>Your order has been placed successfully. You will receive a final confirmation in 5 minutes.</p>\r\n            <button className=\"btn btn-primary\" onClick={closeSuccessMessage}>\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChooseUPI;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}